<launch>
  <arg name="launch_sift" default="true" />
  <arg name="camera" default="/openni/rgb" />
  <arg name="object"/>
  <arg name="window_name" />
  <arg name="template_filename" />
  <arg name="object_width" />
  <arg name="object_height" />
  <arg name="relative_pose" />
  <arg name="reprojection_threshold" default="0" />
  <arg name="error_threshold" default="0" />
  <arg name="distanceratio_threshold" default="0" />
  <arg name="viewer_window" default="false" />

  <include file="$(find pr2_machine)/pr2.machine" />
  <group ns="$(arg camera)">
	<group if="$(arg launch_sift)">
	  <node name="$(arg object)_throttle" pkg="topic_tools"
			type="throttle" args="messages image_rect 4.0"
			machine="c1" />
	  <node name="$(arg object)_sift" pkg="imagesift"
			type="imagesift" launch-prefix="nice -n +10"
			machine="c2" >
		<remap from="image" to="image_rect_throttle" />
	  </node>
	</group>
    <node name="$(arg object)_pose_extractor"
          pkg="jsk_perception" type="point_pose_extractor"
          output="screen" >
      <param name="template_filename"
             value="$(arg image)" />
      <param name="window_name" value="$(arg window_name)"/>
      <param name="object_width" value="$(arg object_width)"/>
      <param name="object_height" value="$(arg object_height)"/>
      <param name="reprojection_threshold" value="$(arg reprojection_threshold)" if="$(arg reprojection_threshold)" />
      <param name="distanceratio_threshold" value="$(arg distanceratio_threshold)" if="$(arg distanceratio_threshold)" />
      <param name="error_threshold" value="$(arg error_threshold)" if="$(arg error_threshold)" />
      <param name="relative_pose" value="$(arg pose)" />
      <param name="viewer_window" value="$(arg viewer_window)" if="$(arg viewer_window)" /> <!-- to disable window-->
    </node>
  </group>
</launch>
<!-- (load "package://jsk_demo_common/euslisp/pr2-action.l") -->
<!-- (setq tray-coords (check-detection :type "tray_center" :speak-name "とれい")) -->
<!-- (setq tray-coords (check-detection :type "tray_center" :speak-name "tray")) -->
